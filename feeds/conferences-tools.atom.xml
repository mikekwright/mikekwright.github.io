<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mike's Dev / Data Science Blog</title><link href="http://mikewright.me/" rel="alternate"></link><link href="http://mikewright.me/feeds/conferences-tools.atom.xml" rel="self"></link><id>http://mikewright.me/</id><updated>2013-10-19T22:43:00-06:00</updated><entry><title>"Sort2013 Part IV: TMUX - Powerup your shell"</title><link href="http://mikewright.me/sort2013-part-iv-tmux-powerup-your-shell.html" rel="alternate"></link><published>2013-10-19T22:43:00-06:00</published><updated>2013-10-19T22:43:00-06:00</updated><author><name>Michael Wright</name></author><id>tag:mikewright.me,2013-10-19:sort2013-part-iv-tmux-powerup-your-shell.html</id><summary type="html">&lt;p&gt;During sort, this session was actually a really insightful look into mouse-less productivity.&lt;br /&gt;
I have always been a fan of working in the console, and have actually used screen in the past. 
However tmux has opened up an entirely new world for me. &lt;/p&gt;
&lt;p&gt;In this post I am going to share some of the things that I have learned from using tmux
as setups I have in place for creating easy on "dev environments".  &lt;/p&gt;
&lt;!-- more --&gt;

&lt;h2&gt;&lt;a href="http://tmux.sourceforge.net/"&gt;TMux overview&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Tmux is a &lt;a href="http://en.wikipedia.org/wiki/Terminal_multiplexer"&gt;terminal multiplexer.&lt;/a&gt; If you
are a heavy user of command line execution on nix-like environments (including ssh) than you
will want to become comfortable with using terminal multiplexers.  This will allow you to
be able to persist sessions, allow for "remote pair-programming" like features.    &lt;/p&gt;
&lt;p&gt;To work with tmux you need to realize that each tmux run creates a "session".  Each session 
can intern have multiple windows.  And each window has 1+ panes.  When a pane is created it
is a completely new shell environment and does not keep aliases or other configuration applied
to a previous pane.    &lt;/p&gt;
&lt;h3&gt;Session&lt;/h3&gt;
&lt;p&gt;Session can be created using names which can allow you to easily switch between multiple 
sessions depending on work you are doing.  To work with session information you start by
using &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;tmux&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;session&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will create a new unnamed session, which you can rename using &lt;code&gt;C-&amp;lt;bindkey&amp;gt; $&lt;/code&gt;.  If you 
want to create a session from scratch with the correct name you can use &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;tmux&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;session&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can now disconnect from a session using &lt;code&gt;C-&amp;lt;bindkey&amp;gt; D&lt;/code&gt;.  After disconnecting, reconnecting is accomplished using&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;tmux&lt;/span&gt; &lt;span class="n"&gt;attach&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Windows&lt;/h3&gt;
&lt;p&gt;We have a newly created session and a single window and a pane at this point.  So lets go over
how to work with windows, both creating and navigation. &lt;/p&gt;
&lt;p&gt;To create a new window from inside the session you can use the default shortcut &lt;code&gt;C-&amp;lt;bindkey&amp;gt; c&lt;/code&gt;. 
This will create a new window that will default to the window number that has already been 
created.  You can also create a new window for an existing session using the following command
line call.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;tmux&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;session&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you want to name this window you can either name it using the shortcut &lt;code&gt;C-&amp;lt;bindkey&amp;gt; ,&lt;/code&gt;. You can
also name it at creation or rename from command line using one of the below commands.   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;tmux&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;session&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="n"&gt;tmux&lt;/span&gt; &lt;span class="k"&gt;rename&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;session&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;number&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So we have window creation and renaming, now on to window destruction.  The shortcut for 
destroying the current window is &lt;code&gt;C-&amp;lt;bindkey&amp;gt; &amp;amp;&lt;/code&gt;.  This will prompt you before the deletion
will be completed, it will also terminal all running processes that were started in any 
of the windows open panes.    &lt;/p&gt;
&lt;p&gt;Window navigation is also pretty straight forward. The below list is the shortcuts and can be
used when navigating.  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;C-&amp;lt;bindkey&amp;gt; n&lt;/code&gt; - Navigate to the next window&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-&amp;lt;bindkey&amp;gt; p&lt;/code&gt; - Navigate to the previous window&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-&amp;lt;bindkey&amp;gt; w&lt;/code&gt; - Open up a window chooser&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-&amp;lt;bindkey&amp;gt; [0-9]&lt;/code&gt; - Quickly navigate to selected window [0-9]&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Panes&lt;/h3&gt;
&lt;p&gt;This is (of course) the reason we are using tmux.  The ability to work with terminals.  A 
pane is always its own terminal.  Up until now we have basically defined tools used to 
organize these created terminals, but panes are the only ones that are terminals.  &lt;/p&gt;
&lt;p&gt;Pane creation is done through window manipulation.  So you always start with your first 
pane, to create a second you must &lt;strong&gt;SPLIT&lt;/strong&gt; the existing pane.  Splitting the pane can
be down either vertically or horizontally.    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;C-&amp;lt;bindkey&amp;gt; %&lt;/code&gt; - Split pane 50% horizontally&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-&amp;lt;bindkey&amp;gt; "&lt;/code&gt; - Split pane 50% vertically &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can also resize existing panes by using &lt;code&gt;C-&amp;lt;bindkey&amp;gt; C-[up-down-left-right]&lt;/code&gt;. As you use
the arrow keys it will adjust the panes giving you the exact setup you desire.  Navigating
through the panes uses nearly the same shortcuts &lt;code&gt;C-&amp;lt;bindkey&amp;gt; [up-down-left-right]&lt;/code&gt;.    &lt;/p&gt;
&lt;h3&gt;Configuration&lt;/h3&gt;
&lt;p&gt;Tmux also provides a means for configuring your tmux setup by supplying .tmux.conf.  Below is 
the sample .tmux.conf file that was created.  &lt;/p&gt;
&lt;div class="gist"&gt;
    &lt;script src='https://gist.github.com/7326539.js?file=.tmux.conf'&gt;&lt;/script&gt;
    &lt;noscript&gt;
        &lt;pre&gt;&lt;code&gt;# Setting my bindkey as a
set -g prefix C-a
unbind C-b
set -s escape-time 1
bind r source-file ~/.tmux.conf \; display "Reloaded."
bind C-a send-prefix
bind X kill-session
bind x kill-pane

# Vim Keys for Pane management
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

set -g default-terminal "screen-256color"

setw -g mode-keys vi

# Command bar
set -g message-bg colour81
set -g message-fg black 
set -g status-interval 30

# Status Bar Changes
set -g status-fg white
set -g status-bg black

# Inactive windows
setw -g window-status-fg cyan
setw -g window-status-bg default
setw -g window-status-attr dim

# Active Window
setw -g window-status-current-fg black
setw -g window-status-current-bg green
setw -g window-status-current-attr bright

# Left side
set -g status-left-length 40
set -g status-left "#[fg=colour155][#S] #[fg=colour110]#I #[fg=colour81]pane: #P"

# Right Side
set -g status-right "#[fg=colour155]#(pmset -g batt | ~/bin/battinfo.rb) | #[fg=colour45]%d %b %R"
set -g status-justify centre
setw -g monitor-activity on
set -g visual-activity on&lt;/code&gt;&lt;/pre&gt;
    &lt;/noscript&gt;
&lt;/div&gt;
&lt;h2&gt;Vim Configuration&lt;/h2&gt;
&lt;p&gt;So I am a huge vim fan.  Nearly every ide I have has vim mode enabled.  It is one of the 
funniest things to have happen when a co-worker says "wow you go through that fast" and I 
respond, "it's just the vim binding".  At that point they start to laugh cause I'm using
vim bindings, and I just shrug and say, "Whatever makes me more productive than you ;-)".   &lt;/p&gt;
&lt;p&gt;My vim setup is pretty simple, since I use vim through ssh shells often and inside of 
screen / tmux sessions, I have adjusted vim to use certain bindings that work in these
environments.    &lt;/p&gt;
&lt;h3&gt;Plugins&lt;/h3&gt;
&lt;p&gt;To really get the power of vim you will need to have some plugins installed and setup
to be enabled in your environment.  Vim allows you to set any number of keyboard shortcuts
you would like, but I would recommend not using function keys (you can get conflicts with
some screen technologies).   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/tpope/vim-pathogen"&gt;Pathogen&lt;/a&gt; - Easy Plugin Management &lt;strong&gt;A MUST&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/scrooloose/nerdtree"&gt;NerdTree&lt;/a&gt; - File Explorer&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/kien/ctrlp.vim"&gt;ctrlp&lt;/a&gt; - Ctrl+P File Searching&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.vim.org/scripts/script.php?script_id=42"&gt;bufexplorer&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;Colorscheme &lt;a href="http://www.vim.org/scripts/script.php?script_id=2140"&gt;xoria256&lt;/a&gt; - 256 trem &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;vimrc&lt;/h3&gt;
&lt;p&gt;These are just some of the basic options that I prefer for use in my vim environment. &lt;/p&gt;
&lt;div class="gist"&gt;
    &lt;script src='https://gist.github.com/7326565.js?file=vimrc'&gt;&lt;/script&gt;
    &lt;noscript&gt;
        &lt;pre&gt;&lt;code&gt;set nocompatible
filetype on
filetype indent on
filetype plugin on

colorscheme xoria256            " This does require 256 term

set smartindent
set autoindent
set expandtab
set tabstop=2
set shiftwidth=2

syntax on
set showmatch                   " Show matching [] and ()
set showmode

set number
set hls    

set cf                          " Enable error files &amp; error jumping.
set clipboard=unnamed           " Yanks go to clipboard
set history=256
set autowrite                   " Writes on make/shell commands
set ruler
set timeoutlen=250              " Time to wait after ESC
set bs=2                        " Backspace over everything in insert mode

set noerrorbells                " No noise on errors

set laststatus=2                " Always show status line

set mousehide                   " Hide mouse after chars typed
set mouse=a                     " Mouse is in all modes&lt;/code&gt;&lt;/pre&gt;
    &lt;/noscript&gt;
&lt;/div&gt;</summary><category term="sort"></category><category term="tmux"></category><category term="linux"></category></entry></feed>