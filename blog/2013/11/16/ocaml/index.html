

<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Ocaml, Opam and utop from a newb - My Fortress of Solitude</title>
    <meta name="author" content="Michael Wright">
    
    <meta name="description" content="Ocaml, Opam and utop from a newb Nov 16th, 2013 Development Ocaml This week I had the chance to attend QCon SF and let me tell you it was a great &hellip;">
    
    <meta name="viewport" content="width=device-width">
    
    <link rel="canonical" href="http://www.mikewright.me/blog/2013/11/16/ocaml">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="//atom.xml" rel="alternate" title="My Fortress of Solitude" type="application/atom+xml">
  </head>


  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item two-fifths lap-four-sixths palm-one-whole">
  <a href="/" class="site-title">My Fortress of Solitude</a>
</div>

<div class="grid__item three-fifths lap-two-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/">Blog</a></li>
</ul>
  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="post">
  <header>
  
  <h1 class="title indent">Ocaml, Opam and utop from a newb</h1>
  

  
  <div class="meta clearfix">
    








  


<time class="pull-left" datetime="2013-11-16T15:03:00-07:00" pubdate data-updated="true"><i class="icon-calendar"></i> Nov 16<span>th</span>, 2013</time>
    



  
  <div class="pull-left">
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      <li><a href="/blog/categories/Development/">Development</a></li>
    
      <li><a href="/blog/categories/Ocaml/">Ocaml</a></li>
    
    </ul>
  </div>
  

    
  </div>
  
</header>




  <p>This week I had the chance to attend QCon SF and let me tell you it was a great experience.
One of the benefits that came out of this conference was a free ebook from ORielly books. The
book that I decided to pickup was the newly released <em>Real World Ocaml</em>.</p>

<p>One of the first things that you need to setup when working with ocaml is, of course, the
environment.  This book talks about using utop and opam (the ocaml package manager). So I
decided to install these tools on my system.  There were a few issues that I ran into while
trying to get it working, so I have decided to document those (and what worked in the end)
so that when I setup a new system I don&rsquo;t have to figure them out all over again.</p>

<!-- more -->


<p></p>

<p>For this installation I will be using Ubuntu 13.10 as my OS of choice, however the final
solution is one that should work on any nix system.</p>

<h2>Install from Packages</h2>

<p>This was the first attempt that I had at installing ocaml and opam, using the debian
provided packages.  This had a few issues, the main issue being that opam is not included
in the standard repositories, so they require you to add another repository.</p>

<pre><code>    add-apt-repository ppa:avsm/ppa
    apt-get update
    apt-get install ocaml opam
</code></pre>

<p>This worked to install the basic opam and ocaml systems, except that I already had ocaml
installed, so I had to first remove the original ocaml package</p>

<pre><code>    apt-get remove ocaml
</code></pre>

<p>After that the install above worked to set things up.  But when trying to install a few of
the packages using opam I ran into the issue that the <code>ocaml-compiler-libs</code> was not installed
and trying to install it failed with a version conflict.</p>

<p>At this point I could have tried to dive a little deeper to find out why it failed and
see if I could resolve the package issue, however I prefer to understand how the install
of the different packages goes anyways, so I decided to install from source.</p>

<h2>Install from Source</h2>

<p>I try to install tools from source whenever I get the chance as I really like to understand
what exactly is happening underneath the covers so that if I run into problems in the
future with it running I can have a better starting point.</p>

<p>So to install ocaml and opam from source these are the steps that I went through.</p>

<div><script src='https://gist.github.com/7506393.js?file=ocaml-install.sh'></script>
<noscript><pre><code>#!/bin/bash
# Sample of this executing located below
#
# INSTALL_PREFIX=$HOME/Development/ocaml CODE_DIR=$HOME/Development/src ./ocaml-install.sh
#
function installOcaml
{
  local codeDir=$1
  local installDir=$2

  cd $codeDir

  wget http://caml.inria.fr/pub/distrib/ocaml-4.01/ocaml-4.01.0.tar.gz
  tar -xvf ocaml-4.01.0.tar.gz
  cd ocaml-4.01.0
  
  ./configure -prefix $installDir
  make world.opt
  make install

  export PATH=$PATH:$installDir/bin
}

function installOpam
{
  local codeDir=$1
  local installDir=$2

  cd $codeDir

  wget http://www.ocamlpro.com/pub/opam-full-1.1.0.tar.gz
  tar -xvf opam-full-1.1.0.tar.gz
  cd opam-full-1.1.0
  
  ./configure -prefix $installDir
  make
  make install

  $installDir/bin/opam init
  $installDir/bin/opam config setup -a

  echo &quot;. $HOME/.opam/opam-init/init.sh &gt; /dev/null 2&gt; /dev/null || true&quot; &gt;&gt; ~/.bashrc
}

installPrefix=${INSTALL_PREFIX:-&quot;/usr/local&quot;}
codeDir=${CODE_DIR:-&quot;/usr/local/src&quot;}

set -o nounset

installOcaml $codeDir $installPrefix
installOpam $codeDir $installPrefix

echo &quot;Ocaml and Opam now installed, you can install utop by doing the following two things&quot;
echo &quot;&quot;
echo &quot;   1. source $HOME/.opam/opam-init/init.sh&quot;
echo &quot;   2. opam install --yes utop&quot;
</code></pre></noscript></div>


<h2>All done?</h2>

<p>Well this was just my first day getting setup to go through the Real World Ocaml book, but
I am very, very excited about this book as ocaml was a language that I reported on in school
years ago and found it to be very exciting.</p>


</article>

 
<section id="disqus">
  <h1 class="indent title">Comments</h1>
  <div id="disqus_thread" aria-live="polite"><div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'wrightcoder'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
</div>
</section>

        
        </div>
        
        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">

  
<section class="social aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">
    Track my Movements
  </h1>
  <ul class="unstyled">
    
    
    <li><a class="github" href="//github.com/wrightcoder"><i class="icon-github"></i> Github</a></li>
    
    <li><a class="gplus" href="//plus.google.com/118232506537372838088"><i class="icon-google-plus-sign"></i> Google+</a></li>
    <li><a class="linkedin" href="//linkedin.com/in/weijiajun"><i class="icon-linkedin-sign"></i> LinkedIn</a></li>
    
    <li><a class="stackoverflow" href="//stackoverflow.com/users/310561"><i class="icon-stackexchange"></i> StackOverflow</a></li>
    <li><a class="twitter" href="//twitter.com/mk_wright"><i class="icon-twitter"></i> Twitter</a></li>
    <li><a class="youtube" href="//youtube.com/user/weijiajun"><i class="icon-youtube"></i> YouTube</a></li>
  </ul>
</section>


  <section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      <li class="post">
        <a href="/blog/2015/10/16/datastax-sandbox-network/">Datastax Sandbox Network</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/12/lets-do-some-weld-ing/">Let's do some Weld-ing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/13/sproutcore-first-impressions/">SproutCore - First Impressions</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/06/docker/">Docker</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/01/ec2-container-service/">EC2 Container Service</a>
      </li>
    
  </ul>
</section>

<section id="github-repos" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">
    GitHub Repos
    
    <small class="pull-right">
      <a class="btn" href="//github.com/wrightcoder" title="@wrightcoder on GitHub" target="_blank">
        <i class="icon-external-link"></i>
      </a>
    </small>
    
  </h1>
  <ul id="gh_repos" class="divided">
    <li class="loading">
      <i class="icon-spinner icon-spin"></i>
    </li>
  </ul>
</section>




</div>

        </aside>
        
      </div>
    </div>
    
    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <p class="copyright">
  All content by Michael Wright and licenced under <a href="//creativecommons.org/licenses/by-nc-sa/3.0/ie/">Creative Commons</a>.<br>
  Code under <a href="//github.com/coogie/oscailte/blob/master/README.md">MIT Licence</a>.
</p>
    </div>
  </div>
</div>

    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
<script defer src="/javascripts/octopress.js"></script>




<script>
  var disqus_shortname = 'wrightcoder';
  
    
    // var disqus_developer = 1;
    var disqus_identifier = 'http://www.mikewright.me/blog/2013/11/16/ocaml/';
    var disqus_url = 'http://www.mikewright.me/blog/2013/11/16/ocaml/';
    var disqus_script = 'embed.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>




<script>
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'wrightcoder',
      count: 0,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>






  </body>
</html>