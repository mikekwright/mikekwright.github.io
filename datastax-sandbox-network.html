
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://mikewright.me/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="http://mikewright.me/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="http://mikewright.me/theme/font-awesome/css/font-awesome.min.css">


    <link href="http://mikewright.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Mike's Dev / Data Science Blog Atom">


    <link rel="shortcut icon" href="http://mikewright.me/images/favicon.jpg" type="image/x-icon">
    <link rel="icon" href="http://mikewright.me/images/favicon.jpg" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />


<meta name="author" content="Michael Wright" />
<meta name="description" content="So today I was working with the datastax virtual environment (namely getting the OVA to work inside of VMWare). There was only one issue that I ran into, that was the external networking was not working out of the box. In this post I will discuss what I looked into ..." />
<meta name="keywords" content="cassandra, datastax, linux">
<meta property="og:site_name" content="Mike's Dev / Data Science Blog"/>
<meta property="og:title" content=""Datastax Sandbox Network""/>
<meta property="og:description" content="So today I was working with the datastax virtual environment (namely getting the OVA to work inside of VMWare). There was only one issue that I ran into, that was the external networking was not working out of the box. In this post I will discuss what I looked into ..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://mikewright.me/datastax-sandbox-network.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2015-10-16 11:10:00-06:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://mikewright.me/author/michael-wright.html">
<meta property="article:section" content="ops"/>
<meta property="article:tag" content="cassandra"/>
<meta property="article:tag" content="datastax"/>
<meta property="article:tag" content="linux"/>
<meta property="og:image" content="http://mikewright.me/images/avatar.jpg">

  <title>Mike's Dev / Data Science Blog &ndash; "Datastax Sandbox Network"</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://mikewright.me">
        <img src="http://mikewright.me/images/avatar.jpg" alt="Love 2 Code" title="Love 2 Code">
      </a>
      <h1><a href="http://mikewright.me">Love 2 Code</a></h1>


      <nav>
        <ul class="list">
          <li><a href="http://mikewright.me/pages/about.html#about">About</a></li>
          <li><a href="http://mikewright.me/pages/contact.html#contact">Contact</a></li>
          <li><a href="http://mikewright.me/pages/experience.html#experience">Experience</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/mikekwright" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/mikekwright" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-twitter" href="https://twitter.com/mikekwright" target="_blank"><i class="fa fa-twitter"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="http://mikewright.me">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="http://mikewright.me/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
    <h1 id="datastax-sandbox-network">"Datastax Sandbox Network"</h1>
    <p>
          Posted on Fri 16 October 2015 in <a href="http://mikewright.me/category/ops.html">ops</a>


    </p>
  </header>
  <div>
    <p>So today I was working with the datastax virtual environment (namely getting the OVA to work 
inside of VMWare).  There was only one issue that I ran into, that was the external networking
was not working out of the box.  In this post I will discuss what I looked into and how I 
fixed the problem in the end.  </p>
<!-- more -->

<p>To start, I am not a very savy linux guru, so the purpose of this post is to both share and 
record my experience so that I can go over it again in the future if needed.   </p>
<h2>Datastax Sandbox</h2>
<p>The datastax sandbox is an environment that is setup with dse cassandra, opscenter and number of 
useful training materials all on a predefined VM.  If you download this vm from datastax, you can
either open it in virtualbox or vmware.  For me, while I like virtualbox and think it is a great
product, I find that vmware general outperforms it for most of my use cases.  That may not always
be the case and I would love to see virtualbox reign supreme.  But since I wanted to use vmware
at the time, I pulled down and opened the ova file and imported it into VMWare.   </p>
<p>When starting up the virtual machine you will need to use the standard login credentials namely: </p>
<div class="highlight"><pre><span></span>    username: datastax
    password: datastax
</pre></div>


<p>Open a terminal and enter the below command, and if you have a simliar output then this fix might
be for you.  </p>
<div class="highlight"><pre><span></span>    [datastax@localhost ~]$ ifconfig
    lo        Link encap:Local Loopback  
              inet addr:127.0.0.1  Mask:255.0.0.0
              inet6 addr: ::1/128 Scope:Host
              UP LOOPBACK RUNNING  MTU:65536  Metric:1
              RX packets:18330 errors:0 dropped:0 overruns:0 frame:0
              TX packets:18330 errors:0 dropped:0 overruns:0 carrier:0
              collisions:0 txqueuelen:0 
              RX bytes:7024417 (6.6 MiB)  TX bytes:7024417 (6.6 MiB)

    [datastax@localhost ~]$
</pre></div>


<p>This means that you have the loopback address up (which is good, otherwise you would be having
some super serious issues), however there is no other connection so outbound traffic will not 
work.  There is a network adapter that has been provided, so why is it that this network isn't 
working?  </p>
<h2>Steps</h2>
<p>At this point, I spent my time trying to understand what is going on with the system.  Even when
adding a new NIC in vmware fusion it did not show up in the virtual machine.  So I first went and
looked in the network setup directory to see what was happenining.  </p>
<div class="highlight"><pre><span></span>    [datastax@localhost network-scripts]$ sudo ifup eth0
    ifcfg-eth0
    eth0
    Device eth0 does not seem to be present, delaying initialization.
</pre></div>


<p>Since this failed, I went to the actual network scripts to run it and see what was going on.  </p>
<div class="highlight"><pre><span></span>    [datastax@localhost ~]$ cd /etc/sysconfig/network-scripts/
    [datastax@localhost network-scripts]$ ./ifup-eth
    ./network-functions: line 107: .: /etc/sysconfig/network-scripts/: is a directory
    Device does not seem to be present, delaying initialization.
</pre></div>


<p>Ok, so the device is not present, yet vmware has a device and it for sure is present.  The next
place to look is in the /etc/udev/rules.d location.  So I opened up the 70-persistent-net.rules
and found that there were actually 2 NICs defined in there.  It seems that when opening the 
device in vmware it created a new nic instead of updating the default eth0.  That is great, this
just means I need to have the startup scripts be aware of the new eth1 device.   </p>
<p>So jumping out of vim I decided to try to <code>ifup</code> the eth1.  </p>
<div class="highlight"><pre><span></span>    [datastax@localhost network-scripts]$ ifup eth1
    /sbin/ifup: configuration for eth1 not found.
    Usage: ifup &lt;device name&gt;
</pre></div>


<p>Ok, so now I need a configuration for this new adapter.  I did this by copying the configuration
for eth0 <code>ifcfg-eth0</code> into a new file <code>ifcfg-eth1</code> and then editing the values that were specific 
for that devices, namely the <code>DEVICE</code>, <code>HWADDR</code> and removing the <code>UUID</code>.  So when completed
here is what my <code>ifcfg-eth1</code> file looked like.  (Note: I had the actual mac address in the HWADDR
field, but removed from this post).  </p>
<div class="highlight"><pre><span></span>    DEVICE=&quot;eth1&quot;
    BOOTPROTO=&quot;dhcp&quot;
    HWADDR=&quot;00:00:00:00:00:00&quot;
    IPV6INIT=&quot;yes&quot;
    MTU=&quot;1500&quot;
    NM_CONTROLLED=&quot;yes&quot;
    ONBOOT=&quot;yes&quot;
    TYPE=&quot;Ethernet&quot;
</pre></div>


<p>At this time, rebooting the machine brought everthing up and then running <code>ifconfig</code> gave me 
better results.   </p>
<div class="highlight"><pre><span></span>    [datastax@localhost ~]$ ifconfig
    eth1      Link encap:Ethernet  HWaddr 00:00:00:00:00:00  
              inet addr:10.4.4.23  Bcast:10.4.4.255  Mask:255.255.255.0
              inet6 addr: fe80::20c:29ff:fe22:7175/64 Scope:Link
              UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
              RX packets:4220 errors:0 dropped:0 overruns:0 frame:0
              TX packets:1172 errors:0 dropped:0 overruns:0 carrier:0
              collisions:0 txqueuelen:1000 
              RX bytes:3207294 (3.0 MiB)  TX bytes:219693 (214.5 KiB)

    lo        Link encap:Local Loopback  
              inet addr:127.0.0.1  Mask:255.0.0.0
              inet6 addr: ::1/128 Scope:Host
              UP LOOPBACK RUNNING  MTU:65536  Metric:1
              RX packets:56717 errors:0 dropped:0 overruns:0 frame:0
              TX packets:56717 errors:0 dropped:0 overruns:0 carrier:0
              collisions:0 txqueuelen:0 
              RX bytes:16718406 (15.9 MiB)  TX bytes:16718406 (15.9 MiB)
</pre></div>


<p>finally we ran our test below to make sure my traffic was all good.   </p>
<div class="highlight"><pre><span></span>    [datastax@localhost ~]$ ping google.com
    PING google.com (216.58.217.206) 56(84) bytes of data.
    64 bytes from lax17s05-in-f206.1e100.net (216.58.217.206): icmp_seq=1 ttl=51 time=21.2 ms
    64 bytes from lax17s05-in-f206.1e100.net (216.58.217.206): icmp_seq=2 ttl=51 time=21.4 ms
</pre></div>


<p>Success! </p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://mikewright.me/tag/cassandra.html">cassandra</a>
      <a href="http://mikewright.me/tag/datastax.html">datastax</a>
      <a href="http://mikewright.me/tag/linux.html">linux</a>
    </p>
  </div>



</article>

    <footer>
<p>&copy; Michael Wright 2016</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Mike's Dev / Data Science Blog ",
  "url" : "http://mikewright.me",
  "image": "http://mikewright.me/images/avatar.jpg",
  "description": "Simple blog created for discussing different topics around development and data science"
}
</script>
</body>
</html>